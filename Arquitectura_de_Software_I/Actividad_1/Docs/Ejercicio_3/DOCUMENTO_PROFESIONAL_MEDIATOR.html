<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patr√≥n Mediator - Sistema de Chat Grupal</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .document {
            background-color: white;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        .header {
            text-align: center;
            border-bottom: 3px solid #2c3e50;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .title {
            color: #2c3e50;
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 16px;
            font-style: italic;
        }
        
        .author-info {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: center;
        }
        
        h1 {
            color: #2c3e50;
            font-size: 24px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        
        h2 {
            color: #34495e;
            font-size: 20px;
            margin-top: 25px;
            margin-bottom: 12px;
        }
        
        h3 {
            color: #34495e;
            font-size: 18px;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .toc {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .toc h2 {
            color: #2c3e50;
            margin-top: 0;
            border: none;
            padding: 0;
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .toc li:before {
            content: "‚ñ∂";
            color: #3498db;
            position: absolute;
            left: 0;
        }
        
        .highlight-box {
            background-color: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        
        .problem-box {
            background-color: #fdf2e9;
            border-left: 4px solid #e67e22;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        
        .solution-box {
            background-color: #eafaf1;
            border-left: 4px solid #27ae60;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        
        .code-block {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .comparison-table th {
            background-color: #34495e;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .comparison-table tr:hover {
            background-color: #e8f4fd;
        }
        
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .benefit-card {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .benefit-card h3 {
            color: #27ae60;
            margin-top: 0;
        }
        
        .benefit-card .icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .architecture-diagram {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .architecture-diagram h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .conclusion {
            background-color: #e8f5e8;
            border: 1px solid #27ae60;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .conclusion h2 {
            color: #27ae60;
            margin-top: 0;
        }
        
        .page-break {
            page-break-before: always;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
            color: #7f8c8d;
            font-size: 12px;
        }
        
        ul, ol {
            margin: 10px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 5px 0;
        }
        
        strong {
            color: #2c3e50;
        }
        
        em {
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="document">
        <div class="header">
            <div class="title">Patr√≥n Mediator</div>
            <div class="subtitle">Sistema de Chat Grupal - An√°lisis e Implementaci√≥n</div>
        </div>
        
        <div class="author-info">
            <strong>Universidad</strong> | Arquitectura de Software<br>
            <em>Taller de Patrones de Dise√±o - Ejercicio 3</em>
        </div>

        <div class="toc">
            <h2>Tabla de Contenidos</h2>
            <ul>
                <li>Introducci√≥n</li>
                <li>An√°lisis del Escenario</li>
                <li>Justificaci√≥n del Patr√≥n Mediator</li>
                <li>Implementaci√≥n de la Soluci√≥n</li>
                <li>Arquitectura del Sistema</li>
                <li>Beneficios Obtenidos</li>
                <li>Caracter√≠sticas Avanzadas</li>
                <li>Conclusiones</li>
            </ul>
        </div>

        <h1>1. Introducci√≥n</h1>
        
        <p>Este documento presenta el an√°lisis, dise√±o e implementaci√≥n de un <strong>sistema de chat grupal</strong> utilizando el <strong>Patr√≥n Mediator</strong> de dise√±o. El proyecto demuestra c√≥mo este patr√≥n arquitect√≥nico resuelve eficazmente los problemas de comunicaci√≥n compleja entre m√∫ltiples objetos en un entorno de chat colaborativo.</p>
        
        <div class="highlight-box">
            <strong>Objetivo Principal:</strong> Demostrar la aplicaci√≥n pr√°ctica del Patr√≥n Mediator para resolver problemas de alta dependencia y acoplamiento en sistemas de comunicaci√≥n multi-objeto.
        </div>

        <h1>2. An√°lisis del Escenario</h1>
        
        <h2>2.1 Problema Original</h2>
        
        <p>En un sistema de chat grupal tradicional, cada usuario necesitar√≠a mantener referencias directas a todos los dem√°s participantes, generando una red compleja de dependencias que presenta m√∫ltiples desaf√≠os:</p>
        
        <div class="problem-box">
            <h3>Problemas Identificados:</h3>
            <ul>
                <li><strong>Alta dependencia:</strong> Cada usuario debe conocer a todos los dem√°s</li>
                <li><strong>Dificultad de escalabilidad:</strong> Agregar/eliminar usuarios requiere modificar m√∫ltiples clases</li>
                <li><strong>L√≥gica dispersa:</strong> La gesti√≥n de comunicaci√≥n est√° distribuida en cada usuario</li>
                <li><strong>Mantenimiento complejo:</strong> Cambios en la comunicaci√≥n afectan m√∫ltiples componentes</li>
            </ul>
        </div>

        <h2>2.2 Complejidad sin Mediator</h2>
        
        <p>En un sistema sin mediador, la complejidad de las relaciones crece exponencialmente:</p>
        
        <div class="architecture-diagram">
            <h3>Estructura Problem√°tica (Sin Mediator)</h3>
            <p><strong>Usuario A ‚Üî Usuario B ‚Üî Usuario C ‚Üî Usuario D</strong></p>
            <p><em>Complejidad: O(n¬≤) dependencias</em></p>
        </div>

        <h1>3. Justificaci√≥n del Patr√≥n Mediator</h1>
        
        <h2>3.1 Comparaci√≥n con Otros Patrones</h2>
        
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Patr√≥n</th>
                    <th>Ventajas</th>
                    <th>Desventajas para este escenario</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Observer</strong></td>
                    <td>Desacoplamiento parcial</td>
                    <td>No centraliza la l√≥gica de comunicaci√≥n</td>
                </tr>
                <tr>
                    <td><strong>Command</strong></td>
                    <td>Encapsula operaciones</td>
                    <td>No resuelve la comunicaci√≥n entre objetos</td>
                </tr>
                <tr>
                    <td><strong>Facade</strong></td>
                    <td>Simplifica interfaz</td>
                    <td>No maneja interacciones complejas</td>
                </tr>
                <tr>
                    <td><strong>Mediator</strong></td>
                    <td>‚úÖ Centraliza comunicaci√≥n<br>‚úÖ Reduce acoplamiento<br>‚úÖ Facilita escalabilidad</td>
                    <td>Complejidad inicial</td>
                </tr>
            </tbody>
        </table>

        <h2>3.2 Razones de Elecci√≥n del Mediator</h2>
        
        <div class="benefits-grid">
            <div class="benefit-card">
                <div class="icon">üéØ</div>
                <h3>Centralizaci√≥n</h3>
                <p>Toda la l√≥gica de comunicaci√≥n est√° en un solo lugar</p>
            </div>
            <div class="benefit-card">
                <div class="icon">üîó</div>
                <h3>Desacoplamiento</h3>
                <p>Los usuarios no conocen entre s√≠, solo al mediador</p>
            </div>
            <div class="benefit-card">
                <div class="icon">üìà</div>
                <h3>Escalabilidad</h3>
                <p>Agregar/eliminar usuarios es trivial</p>
            </div>
            <div class="benefit-card">
                <div class="icon">üõ†Ô∏è</div>
                <h3>Mantenibilidad</h3>
                <p>Cambios en la comunicaci√≥n se realizan en un solo punto</p>
            </div>
        </div>

        <h1>4. Implementaci√≥n de la Soluci√≥n</h1>
        
        <h2>4.1 Estructura de Clases</h2>
        
        <div class="code-block">
// Interfaz del Mediador
public interface IChatMediator
{
    void SendMessage(string from, string to, string message);
    void AddUser(User user);
}

// Implementaci√≥n B√°sica
internal class ChatMediator : IChatMediator
{
    private readonly IDictionary&lt;string, User&gt; _users;
    // Implementaci√≥n de la l√≥gica de comunicaci√≥n
}

// Implementaci√≥n Avanzada con Reflexi√≥n
public class ReflectiveChatMediator : IChatMediator
{
    private readonly IDictionary&lt;string, User&gt; _users;
    private readonly IDictionary&lt;string, MethodInfo&gt; _messageHandlers;
    private readonly IDictionary&lt;string, object&gt; _participants;
    // Implementaci√≥n con capacidades reflexivas
}
        </div>

        <h2>4.2 Participantes del Patr√≥n</h2>
        
        <ol>
            <li><strong>Mediator (IChatMediator):</strong> Define la interfaz para comunicaci√≥n</li>
            <li><strong>ConcreteMediator (ChatMediator/ReflectiveChatMediator):</strong> Implementa la l√≥gica de comunicaci√≥n</li>
            <li><strong>Colleague (User):</strong> Representa los usuarios del chat</li>
            <li><strong>ConcreteColleague (User):</strong> Implementaci√≥n espec√≠fica de usuario</li>
        </ol>

        <h1>5. Arquitectura del Sistema</h1>
        
        <h2>5.1 Flujo de Comunicaci√≥n</h2>
        
        <div class="architecture-diagram">
            <h3>Flujo Simplificado con Mediator</h3>
            <p><strong>Usuario 1 ‚Üí Mediador ‚Üí Usuario 2</strong></p>
            <p><strong>Usuario 1 ‚Üí Mediador ‚Üí Usuario 3</strong></p>
            <p><strong>Usuario 1 ‚Üí Mediador ‚Üí Usuario 4</strong></p>
            <p><em>Complejidad: O(n) dependencias</em></p>
        </div>

        <h2>5.2 Componentes Principales</h2>
        
        <h3>ReflectiveChatMediator - Implementaci√≥n Avanzada</h3>
        <ul>
            <li><strong>Reflexi√≥n:</strong> Uso de atributos para configuraci√≥n autom√°tica</li>
            <li><strong>Handlers din√°micos:</strong> M√©todos marcados con <code>[MediatorHandler]</code></li>
            <li><strong>Estad√≠sticas:</strong> Recopilaci√≥n autom√°tica de m√©tricas</li>
            <li><strong>Logging:</strong> Registro de actividades del chat</li>
        </ul>

        <h3>User - Participante del Chat</h3>
        <div class="code-block">
[MediatorParticipant("ChatUser")]
public class User
{
    [MediatorProperty("NickName", true)]
    public string NickName { get; set; }
    
    [MediatorProperty("IsOnline")]
    public bool IsOnline { get; set; }
    
    // M√©todos de comunicaci√≥n a trav√©s del mediador
}
        </div>

        <h1>6. Beneficios Obtenidos</h1>
        
        <h2>6.1 Beneficios Esperados (Cumplidos)</h2>
        
        <div class="solution-box">
            <h3>‚úÖ 1. Facilita el Mantenimiento</h3>
            <p><strong>Antes:</strong> Modificar comunicaci√≥n requer√≠a cambios en m√∫ltiples clases</p>
            <p><strong>Despu√©s:</strong> Cambios centralizados en el mediador</p>
            <p><strong>Ejemplo:</strong> Agregar filtro de mensajes solo requiere modificar el mediador</p>
        </div>
        
        <div class="solution-box">
            <h3>‚úÖ 2. Mejor Organizaci√≥n</h3>
            <p><strong>Antes:</strong> L√≥gica de comunicaci√≥n dispersa en cada usuario</p>
            <p><strong>Despu√©s:</strong> L√≥gica centralizada y bien estructurada</p>
            <p><strong>Ejemplo:</strong> Manejo de usuarios offline, logs, estad√≠sticas en un solo lugar</p>
        </div>
        
        <div class="solution-box">
            <h3>‚úÖ 3. Reduce la Complejidad</h3>
            <p><strong>Antes:</strong> Red compleja de dependencias entre usuarios</p>
            <p><strong>Despu√©s:</strong> Estructura simple: Usuario ‚Üî Mediador ‚Üî Usuario</p>
            <p><strong>Ejemplo:</strong> Agregar 10 usuarios nuevos no requiere modificar usuarios existentes</p>
        </div>

        <h2>6.2 Beneficios Adicionales</h2>
        
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Aspecto</th>
                    <th>Sin Mediator</th>
                    <th>Con Mediator</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Acoplamiento</strong></td>
                    <td>Alto (O(n¬≤))</td>
                    <td>Bajo (O(n))</td>
                </tr>
                <tr>
                    <td><strong>Mantenimiento</strong></td>
                    <td>Dif√≠cil</td>
                    <td>F√°cil</td>
                </tr>
                <tr>
                    <td><strong>Escalabilidad</strong></td>
                    <td>Limitada</td>
                    <td>Excelente</td>
                </tr>
                <tr>
                    <td><strong>Testabilidad</strong></td>
                    <td>Compleja</td>
                    <td>Simple</td>
                </tr>
            </tbody>
        </table>

        <h1>7. Caracter√≠sticas Avanzadas</h1>
        
        <h2>7.1 Sistema de Reflexi√≥n</h2>
        
        <div class="code-block">
// Configuraci√≥n autom√°tica de propiedades
private void ConfigureParticipantProperties(object participant)
{
    var properties = participant.GetType().GetProperties()
        .Where(p => p.GetCustomAttribute&lt;MediatorPropertyAttribute&gt;() != null);
    // Configuraci√≥n autom√°tica basada en atributos
}
        </div>

        <h2>7.2 Handlers Din√°micos</h2>
        
        <div class="code-block">
[MediatorHandler("broadcast", "Maneja mensajes enviados a todos los usuarios")]
private void HandleBroadcastMessage(string from, string to, string message)
{
    // L√≥gica espec√≠fica para mensajes de difusi√≥n
}
        </div>

        <h2>7.3 Estad√≠sticas y Monitoreo</h2>
        
        <div class="code-block">
public Dictionary&lt;string, object&gt; GetChatStatistics()
{
    return new Dictionary&lt;string, object&gt;
    {
        ["TotalUsers"] = _users.Count,
        ["TotalHandlers"] = _messageHandlers.Count,
        ["LastActivity"] = DateTime.Now
    };
}
        </div>

        <h1>8. Conclusiones</h1>
        
        <div class="conclusion">
            <h2>Resumen de la Implementaci√≥n</h2>
            
            <p>El <strong>Patr√≥n Mediator</strong> result√≥ ser la soluci√≥n √≥ptima para este escenario de chat grupal porque:</p>
            
            <ol>
                <li><strong>Resuelve el problema central:</strong> Elimina las dependencias directas entre usuarios</li>
                <li><strong>Centraliza la l√≥gica:</strong> Toda la comunicaci√≥n pasa por un punto √∫nico</li>
                <li><strong>Facilita la escalabilidad:</strong> Agregar/eliminar usuarios es trivial</li>
                <li><strong>Mejora el mantenimiento:</strong> Cambios se realizan en un solo lugar</li>
                <li><strong>Permite extensibilidad:</strong> Nuevas funcionalidades sin afectar usuarios existentes</li>
            </ol>
            
            <h3>Innovaciones Implementadas</h3>
            <ul>
                <li><strong>Mediador Reflexivo:</strong> Uso de atributos y reflexi√≥n para configuraci√≥n autom√°tica</li>
                <li><strong>Handlers Din√°micos:</strong> Sistema de procesamiento de mensajes basado en atributos</li>
                <li><strong>Estad√≠sticas Integradas:</strong> Monitoreo autom√°tico de la actividad del chat</li>
                <li><strong>Gesti√≥n de Estado:</strong> Control avanzado del estado de los participantes</li>
            </ul>
            
            <h3>Impacto en la Calidad del C√≥digo</h3>
            <ul>
                <li><strong>Acoplamiento:</strong> Reducido de alto a bajo</li>
                <li><strong>Cohesi√≥n:</strong> Aumentada significativamente</li>
                <li><strong>Mantenibilidad:</strong> Mejorada considerablemente</li>
                <li><strong>Escalabilidad:</strong> Excelente para crecimiento futuro</li>
                <li><strong>Testabilidad:</strong> Cada componente es independiente</li>
            </ul>
        </div>

        <div class="footer">
            <p>Documento generado para el an√°lisis del Patr√≥n Mediator en sistemas de chat grupal</p>
            <p>Universidad | Arquitectura de Software | Taller de Patrones de Dise√±o</p>
        </div>
    </div>
</body>
</html>
